<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="mapbox/mapbox-gl.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/MarkerCluster.css">
        <link rel="stylesheet" href="css/MarkerCluster.Default.css">
        <link rel="stylesheet" href="mapbox/mapbox-gl-generic-geocoder.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title></title>
    </head>
    <body>
        <div id="map">
            <nav id="menu"></nav>
              <div id="distance" class="distance-container"></div>
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="./mapbox/mapbox-gl.js"></script>
        <script src="mapbox/mapbox-gl-generic-geocoder.min.js"></script>
        <script src="js/leaflet.markercluster.js"></script>
        <script src="data/PedestrianPlazas_1.js"></script>
        <script src="data/WalkNYCSignLocations_2.js"></script>
        <script src="data/StreetSeats_3.js"></script>
        <script src="data/LeaningBars_4.js"></script>
        <script src="data/CityBenches_5.js"></script>
        <script src="data/nullfile_6.js"></script>
<script src="./mapbox/style.js"></script>
<script src="./js/Autolinker.min.js"></script>
<script>
var map = new mapboxgl.Map({
 container: 'map',
 style: styleJSON,
 center: [-73.81531534595076,40.7723116776501],
 zoom: 11,
 bearing: 360.0,
 attributionControl: false
});
map.addControl(new mapboxgl.NavigationControl(), 'top-left');
map.addControl(new mapboxgl.AttributionControl({
    customAttribution: '<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://github.com/mapbox/mapbox-gl-js" target="_blank">Mapbox GL JS</a> &middot; <a href="https://qgis.org" target="_blank">QGIS</a>',
    compact: false
}));
var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});

map.on('click', 'lyr_PedestrianPlazas_1_0', function (e) {
    var description = '<table>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['objectid'] !== null ? autolinker.link(e.features[0].properties['objectid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borocd'] !== null ? autolinker.link(e.features[0].properties['borocd'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['assemdist'] !== null ? autolinker.link(e.features[0].properties['assemdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['coundist'] !== null ? autolinker.link(e.features[0].properties['coundist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['congdist'] !== null ? autolinker.link(e.features[0].properties['congdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['stsendist'] !== null ? autolinker.link(e.features[0].properties['stsendist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['plazaname'] !== null ? autolinker.link(e.features[0].properties['plazaname'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['onstreet'] !== null ? autolinker.link(e.features[0].properties['onstreet'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['fromstreet'] !== null ? autolinker.link(e.features[0].properties['fromstreet'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['tostreet'] !== null ? autolinker.link(e.features[0].properties['tostreet'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['partner'] !== null ? autolinker.link(e.features[0].properties['partner'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borocode'] !== null ? autolinker.link(e.features[0].properties['borocode'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['boroname'] !== null ? autolinker.link(e.features[0].properties['boroname'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafldz'] !== null ? autolinker.link(e.features[0].properties['femafldz'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafldt'] !== null ? autolinker.link(e.features[0].properties['femafldt'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['hrcevac'] !== null ? autolinker.link(e.features[0].properties['hrcevac'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['shape_leng'] !== null ? autolinker.link(e.features[0].properties['shape_leng'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['shape_area'] !== null ? autolinker.link(e.features[0].properties['shape_area'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>'

    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(description)
        .addTo(map);
});

// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'lyr_PedestrianPlazas_1_0', function () {
    map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'lyr_PedestrianPlazas_1_0', function () {
    map.getCanvas().style.cursor = '';
});
map.on('click', 'lyr_WalkNYCSignLocations_2_0', function (e) {
    var description = '<table>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['side'] !== null ? autolinker.link(e.features[0].properties['side'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['x'] !== null ? autolinker.link(e.features[0].properties['x'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['coun_dist'] !== null ? autolinker.link(e.features[0].properties['coun_dist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['site_id'] !== null ? autolinker.link(e.features[0].properties['site_id'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['y'] !== null ? autolinker.link(e.features[0].properties['y'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['angle'] !== null ? autolinker.link(e.features[0].properties['angle'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['ntaname'] !== null ? autolinker.link(e.features[0].properties['ntaname'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['xstreet_2'] !== null ? autolinker.link(e.features[0].properties['xstreet_2'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafldz'] !== null ? autolinker.link(e.features[0].properties['femafldz'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['assem_dist'] !== null ? autolinker.link(e.features[0].properties['assem_dist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['boro_name'] !== null ? autolinker.link(e.features[0].properties['boro_name'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['xstreet_1'] !== null ? autolinker.link(e.features[0].properties['xstreet_1'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['status'] !== null ? autolinker.link(e.features[0].properties['status'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafld_t'] !== null ? autolinker.link(e.features[0].properties['femafld_t'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['st_sen_dist'] !== null ? autolinker.link(e.features[0].properties['st_sen_dist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['street'] !== null ? autolinker.link(e.features[0].properties['street'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['boro_code'] !== null ? autolinker.link(e.features[0].properties['boro_code'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['type'] !== null ? autolinker.link(e.features[0].properties['type'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['boro_cd'] !== null ? autolinker.link(e.features[0].properties['boro_cd'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['hrc_evac'] !== null ? autolinker.link(e.features[0].properties['hrc_evac'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['cong_dist'] !== null ? autolinker.link(e.features[0].properties['cong_dist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>'

    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(description)
        .addTo(map);
});

// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'lyr_WalkNYCSignLocations_2_0', function () {
    map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'lyr_WalkNYCSignLocations_2_0', function () {
    map.getCanvas().style.cursor = '';
});
map.on('click', 'lyr_StreetSeats_3_0', function (e) {
    var description = '<table>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['f1'] !== null ? autolinker.link(e.features[0].properties['f1'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borough'] !== null ? autolinker.link(e.features[0].properties['borough'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['ifo_busine'] !== null ? autolinker.link(e.features[0].properties['ifo_busine'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['applicant'] !== null ? autolinker.link(e.features[0].properties['applicant'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['year'] !== null ? autolinker.link(e.features[0].properties['year'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['location'] !== null ? autolinker.link(e.features[0].properties['location'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['from_'] !== null ? autolinker.link(e.features[0].properties['from_'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['to'] !== null ? autolinker.link(e.features[0].properties['to'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['site_visit'] !== null ? autolinker.link(e.features[0].properties['site_visit'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['structure'] !== null ? autolinker.link(e.features[0].properties['structure'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['structur_1'] !== null ? autolinker.link(e.features[0].properties['structur_1'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['structur_2'] !== null ? autolinker.link(e.features[0].properties['structur_2'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['establishm'] !== null ? autolinker.link(e.features[0].properties['establishm'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['parking_re'] !== null ? autolinker.link(e.features[0].properties['parking_re'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['applicatio'] !== null ? autolinker.link(e.features[0].properties['applicatio'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['community_'] !== null ? autolinker.link(e.features[0].properties['community_'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['_2019_inst'] !== null ? autolinker.link(e.features[0].properties['_2019_inst'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['_2019_remo'] !== null ? autolinker.link(e.features[0].properties['_2019_remo'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['latitude'] !== null ? autolinker.link(e.features[0].properties['latitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['longitude'] !== null ? autolinker.link(e.features[0].properties['longitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['postcode'] !== null ? autolinker.link(e.features[0].properties['postcode'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['council_di'] !== null ? autolinker.link(e.features[0].properties['council_di'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['census_tra'] !== null ? autolinker.link(e.features[0].properties['census_tra'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['bin'] !== null ? autolinker.link(e.features[0].properties['bin'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['bbl'] !== null ? autolinker.link(e.features[0].properties['bbl'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['nta'] !== null ? autolinker.link(e.features[0].properties['nta'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>'

    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(description)
        .addTo(map);
});

// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'lyr_StreetSeats_3_0', function () {
    map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'lyr_StreetSeats_3_0', function () {
    map.getCanvas().style.cursor = '';
});
map.on('click', 'lyr_LeaningBars_4_0', function (e) {
    var description = '<table>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['FID'] !== null ? autolinker.link(e.features[0].properties['FID'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['OBJECTID'] !== null ? autolinker.link(e.features[0].properties['OBJECTID'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['BoroCode'] !== null ? autolinker.link(e.features[0].properties['BoroCode'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Borough'] !== null ? autolinker.link(e.features[0].properties['Borough'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['BroroCD'] !== null ? autolinker.link(e.features[0].properties['BroroCD'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Council District'] !== null ? autolinker.link(e.features[0].properties['Council District'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['AssemDist'] !== null ? autolinker.link(e.features[0].properties['AssemDist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['StSenDist'] !== null ? autolinker.link(e.features[0].properties['StSenDist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['CongDist'] !== null ? autolinker.link(e.features[0].properties['CongDist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Site_ID'] !== null ? autolinker.link(e.features[0].properties['Site_ID'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Category'] !== null ? autolinker.link(e.features[0].properties['Category'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Address'] !== null ? autolinker.link(e.features[0].properties['Address'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Geocode_Ad'] !== null ? autolinker.link(e.features[0].properties['Geocode_Ad'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['On_Street'] !== null ? autolinker.link(e.features[0].properties['On_Street'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Cross_Stre'] !== null ? autolinker.link(e.features[0].properties['Cross_Stre'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['ZipCode'] !== null ? autolinker.link(e.features[0].properties['ZipCode'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Bar Quantity'] !== null ? autolinker.link(e.features[0].properties['Bar Quantity'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['ComDist'] !== null ? autolinker.link(e.features[0].properties['ComDist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Installati'] !== null ? autolinker.link(e.features[0].properties['Installati'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['RouteID'] !== null ? autolinker.link(e.features[0].properties['RouteID'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['FEMAFldz'] !== null ? autolinker.link(e.features[0].properties['FEMAFldz'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['FEMAFldt'] !== null ? autolinker.link(e.features[0].properties['FEMAFldt'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['HrcEvac'] !== null ? autolinker.link(e.features[0].properties['HrcEvac'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Latitude'] !== null ? autolinker.link(e.features[0].properties['Latitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Longitude'] !== null ? autolinker.link(e.features[0].properties['Longitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Community Board'] !== null ? autolinker.link(e.features[0].properties['Community Board'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Council District_1'] !== null ? autolinker.link(e.features[0].properties['Council District_1'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['Census Tract'] !== null ? autolinker.link(e.features[0].properties['Census Tract'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['BIN'] !== null ? autolinker.link(e.features[0].properties['BIN'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['BBL'] !== null ? autolinker.link(e.features[0].properties['BBL'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['NTA'] !== null ? autolinker.link(e.features[0].properties['NTA'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>'

    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(description)
        .addTo(map);
});

// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'lyr_LeaningBars_4_0', function () {
    map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'lyr_LeaningBars_4_0', function () {
    map.getCanvas().style.cursor = '';
});
map.on('click', 'lyr_CityBenches_5_0', function (e) {
    var description = '<table>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borocode'] !== null ? autolinker.link(e.features[0].properties['borocode'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['boroname'] !== null ? autolinker.link(e.features[0].properties['boroname'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borocd'] !== null ? autolinker.link(e.features[0].properties['borocd'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['coundist'] !== null ? autolinker.link(e.features[0].properties['coundist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['assemdist'] !== null ? autolinker.link(e.features[0].properties['assemdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['stsendist'] !== null ? autolinker.link(e.features[0].properties['stsendist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['congdist'] !== null ? autolinker.link(e.features[0].properties['congdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['siteid'] !== null ? autolinker.link(e.features[0].properties['siteid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['benchid'] !== null ? autolinker.link(e.features[0].properties['benchid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['category'] !== null ? autolinker.link(e.features[0].properties['category'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['benchtype'] !== null ? autolinker.link(e.features[0].properties['benchtype'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['date_insta'] !== null ? autolinker.link(e.features[0].properties['date_insta'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['time_insta'] !== null ? autolinker.link(e.features[0].properties['time_insta'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['address'] !== null ? autolinker.link(e.features[0].properties['address'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['geocodeadd'] !== null ? autolinker.link(e.features[0].properties['geocodeadd'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['street'] !== null ? autolinker.link(e.features[0].properties['street'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['crossstree'] !== null ? autolinker.link(e.features[0].properties['crossstree'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borough'] !== null ? autolinker.link(e.features[0].properties['borough'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['comdist'] !== null ? autolinker.link(e.features[0].properties['comdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['busroute'] !== null ? autolinker.link(e.features[0].properties['busroute'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['bid'] !== null ? autolinker.link(e.features[0].properties['bid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['latitude'] !== null ? autolinker.link(e.features[0].properties['latitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['longitude'] !== null ? autolinker.link(e.features[0].properties['longitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafldz'] !== null ? autolinker.link(e.features[0].properties['femafldz'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafldt'] !== null ? autolinker.link(e.features[0].properties['femafldt'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['hrcevac'] !== null ? autolinker.link(e.features[0].properties['hrcevac'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>'

    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(description)
        .addTo(map);
});

// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'lyr_CityBenches_5_0', function () {
    map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'lyr_CityBenches_5_0', function () {
    map.getCanvas().style.cursor = '';
});
map.on('click', 'lyr_nullfile_6_0', function (e) {
    var description = '<table>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borocode'] !== null ? autolinker.link(e.features[0].properties['borocode'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['boroname'] !== null ? autolinker.link(e.features[0].properties['boroname'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borocd'] !== null ? autolinker.link(e.features[0].properties['borocd'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['coundist'] !== null ? autolinker.link(e.features[0].properties['coundist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['assemdist'] !== null ? autolinker.link(e.features[0].properties['assemdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['stsendist'] !== null ? autolinker.link(e.features[0].properties['stsendist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['congdist'] !== null ? autolinker.link(e.features[0].properties['congdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['siteid'] !== null ? autolinker.link(e.features[0].properties['siteid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['benchid'] !== null ? autolinker.link(e.features[0].properties['benchid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['category'] !== null ? autolinker.link(e.features[0].properties['category'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['benchtype'] !== null ? autolinker.link(e.features[0].properties['benchtype'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['date_insta'] !== null ? autolinker.link(e.features[0].properties['date_insta'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['time_insta'] !== null ? autolinker.link(e.features[0].properties['time_insta'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['address'] !== null ? autolinker.link(e.features[0].properties['address'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['geocodeadd'] !== null ? autolinker.link(e.features[0].properties['geocodeadd'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['street'] !== null ? autolinker.link(e.features[0].properties['street'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['crossstree'] !== null ? autolinker.link(e.features[0].properties['crossstree'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['borough'] !== null ? autolinker.link(e.features[0].properties['borough'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['comdist'] !== null ? autolinker.link(e.features[0].properties['comdist'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['busroute'] !== null ? autolinker.link(e.features[0].properties['busroute'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['bid'] !== null ? autolinker.link(e.features[0].properties['bid'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['latitude'] !== null ? autolinker.link(e.features[0].properties['latitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['longitude'] !== null ? autolinker.link(e.features[0].properties['longitude'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafldz'] !== null ? autolinker.link(e.features[0].properties['femafldz'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['femafldt'] !== null ? autolinker.link(e.features[0].properties['femafldt'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (e.features[0].properties['hrcevac'] !== null ? autolinker.link(e.features[0].properties['hrcevac'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>'

    new mapboxgl.Popup()
        .setLngLat(e.lngLat)
        .setHTML(description)
        .addTo(map);
});

// Change the cursor to a pointer when the mouse is over the places layer.
map.on('mouseenter', 'lyr_nullfile_6_0', function () {
    map.getCanvas().style.cursor = 'pointer';
});

// Change it back to a pointer when it leaves.
map.on('mouseleave', 'lyr_nullfile_6_0', function () {
    map.getCanvas().style.cursor = '';
});
    var toggleableLayerIds = ['lyr_nullfile_6_0', 'nullfile','lyr_CityBenches_5_0', 'City Benches','lyr_LeaningBars_4_0', 'Leaning Bars','lyr_StreetSeats_3_0', 'Street Seats','lyr_WalkNYCSignLocations_2_0', 'WalkNYC Sign Locations','lyr_PedestrianPlazas_1_0', 'Pedestrian Plazas','lyr_ESRIGraylight_0_0', 'ESRI Gray (light)'];

    for (var i = 0; i < toggleableLayerIds.length; i=i+2) {
        var id = toggleableLayerIds[i];
        var layerName = toggleableLayerIds[i+1]

        var link = document.createElement('a');
        link.href = '#';
        link.className = 'active';
        link.layer = id;
        link.textContent = layerName;

        link.onclick = function (e) {
            var clickedLayer = this.layer;
            e.preventDefault();
            e.stopPropagation();

            var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

            if (typeof visibility === 'undefined' || visibility == 'visible') {
                map.setLayoutProperty(clickedLayer, 'visibility', 'none');
                this.className = '';
            } else {
                this.className = 'active';
                map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
            }
        };

        var layers = document.getElementById('menu');
        layers.appendChild(link);
    }
        var geocodeNominatimRequest = function(query, mapBounds, options) {
        var params = { format: "json", q: query, limit: options.limit };
        var urlParams = new URLSearchParams(Object.entries(params));

        return fetch("http://nominatim.openstreetmap.org/search?" + urlParams)
            .then(function(response) {
                if(response.ok) {
                    return response.json();
                } else {
                    return [];
                }
            }).then(function(json) {
                return json.map(function(result) {
                    return {
                        name: result.display_name,
                        lat: result.lat,
                        lon: result.lon,
                        bbox: [result.boundingbox[2], result.boundingbox[0],
                               result.boundingbox[3], result.boundingbox[1]]
                    };
                });
            });
        };

        map.addControl(new MapboxGenericGeocoder({}, geocodeNominatimRequest));
</script>
        <script>
        map.addControl(
            new mapboxgl.GeolocateControl({
                positionOptions: {
                    enableHighAccuracy: true
                },
                trackUserLocation: true
            })
        );
        </script>
    </body>
</html>
